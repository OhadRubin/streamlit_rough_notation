{"version":3,"sources":["MyComponent.tsx","index.tsx"],"names":["MyRoughNotation","props","node","_onMouseClick","index","onMouseClick","setState","is_selected","state","is_hovering","React","useRef","this","value","index_is_selected","onMouseEnter","onMouseLeave","rest","_index_is_selected","console","log","current","scrollIntoView","behavior","block","inline","type","onClick","show","ref","Component","MyComponent","numClicks","isFocused","get_is_selected","set_is_selected","i","render","name","args","theme","style","borderStyling","primaryColor","border","outline","values","animate","strokeWidth","iterations","multiline","onClicked","map","prevState","Streamlit","setComponentValue","StreamlitComponentBase","withStreamlitConnection","ReactDOM","StrictMode","document","getElementById"],"mappings":"6WAeMA,EAAe,kDAEnB,WAAYC,GAAY,IAAD,EAIU,OAJV,qBACrB,cAAMA,IAFRC,UAAI,IAQIC,cAAgB,SAACC,EAAYC,GAEnC,EAAKC,SAAS,CAAEC,aAAa,IAC7BF,EAAaD,IARb,EAAKI,MAAQ,CAAEC,aAAa,EAAOF,aAAa,GAEhD,EAAKL,KAAOQ,IAAMC,OAAO,MAAM,EAqChC,OApCA,mCAOD,WAAU,IAAD,OACDV,EAAYW,KAAKX,MACjBQ,EAAcG,KAAKJ,MAAMC,YAGtBL,GAMLH,EAPFY,MAOEZ,EANFG,OACmBU,EAKjBb,EALFa,kBAGcT,GAEZJ,EAJFc,aAIEd,EAHFe,aAGEf,EAFFI,cACGY,EAAI,YACLhB,EAAK,GAEHiB,EAAqBJ,KAAqBV,EAOhD,OALIc,IACFC,QAAQC,IAAIR,KAAKV,MAEjBU,KAAKV,KAAKmB,QAAQC,eAAe,CAAEC,SAAU,OAAQC,MAAO,SAAUC,OAAQ,YAExE,8BACN,kBAAC,IAAa,iBAAKR,EAAI,CAAES,KAAK,YAC5BX,aAAc,kBAAM,EAAKT,SAAS,CAAEG,aAAa,KACjDO,aAAc,kBAAM,EAAKV,SAAS,CAAEG,aAAa,KACjDkB,QAAS,kBAAM,EAAKxB,cAAcC,EAAOC,IACzCuB,KAAMV,GAAsBT,KACd,UAAS,yBAAKoB,IAAKjB,KAAKV,OAClC,UAET,EA3CkB,CAASQ,IAAMoB,WA+C9BC,EAAW,iKAiEd,OAjEc,oCACRvB,MAAQ,CAAEwB,UAAW,EAAGC,WAAW,EAAOxB,aAAc,EAAIF,aAAc,GAAI,EAC7E2B,gBAAkB,WACxB,OAAO,EAAK1B,MAAMD,aACnB,EACO4B,gBAAkB,SAACC,GACrBA,GAAG,GACL,EAAK9B,SAAS,CAAEC,YAAa6B,KAGhC,EACMC,OAAS,WAEd,IAAMC,EAAO,EAAKrC,MAAMsC,KAAW,KACnC,EAAKJ,gBAAgB,EAAKlC,MAAMsC,KAAqB,gBAKrD,IAAQC,EAAU,EAAKvC,MAAfuC,MACFC,EAA6B,GAKnC,GAJAtB,QAAQC,IAAI,cAIRoB,EAAO,CAGT,IAAME,EAAa,oBACjB,EAAKlC,MAAMyB,UAAYO,EAAMG,aAAe,QAE9CF,EAAMG,OAASF,EACfD,EAAMI,QAAUH,EAIlB,IAAMI,EAAcR,EACdrC,EAAQ,CACZ8C,SAAS,EACTC,YAAa,EACbC,WAAW,EACXC,WAAU,EACV7C,aAAc,EAAK8C,WAerB,OAAOL,EAAOM,KAXD,SAACvC,EAAeT,GAE3B,IAAMa,EAAI,aACRJ,MAAOA,EACPT,MAAOA,EACPU,kBAAmB,kBAAM,EAAKoB,oBAC1BjC,GAEN,OACE,kBAAC,EAAoBgB,OAG1B,EAEOkC,UAAY,SAACf,GACnB,EAAK9B,UACH,SAAA+C,GAAS,MAAK,CAAE9C,YAAa6B,MAC7B,kBAAMkB,IAAUC,kBAAkB,EAAK/C,MAAMD,iBAEhD,wBAjEc,CAASiD,KAoEXC,cAAwB1B,GC9HvC2B,IAASrB,OACP,kBAAC,IAAMsB,WAAU,KACf,kBAAC,EAAW,OAEdC,SAASC,eAAe,W","file":"static/js/main.39943f95.chunk.js","sourcesContent":["import {\n  Streamlit,\n  StreamlitComponentBase,\n  withStreamlitConnection,\n} from \"streamlit-component-lib\"\nimport React, { ReactNode } from \"react\"\nimport { RoughNotation } from \"react-rough-notation\";\n\ninterface State {\n  numClicks: number\n  isFocused: boolean\n  is_hovering: number\n  is_selected: number\n}\n// here we need to modify to add the _ref\nclass MyRoughNotation extends React.Component<{}, { is_hovering: boolean, is_selected: boolean}> {\n  node: any;\n  constructor(props:any) {\n    super(props);\n    this.state = { is_hovering: false, is_selected: false\n    };\n    this.node = React.useRef(null);\n  }\n\n  private _onMouseClick = (index: any, onMouseClick: any) => {\n\n    this.setState({ is_selected: true });\n    onMouseClick(index);\n  }\n  render() {\n    const props:any = this.props;\n    const is_hovering = this.state.is_hovering;\n    const {\n      value: value,\n      index: index,\n      index_is_selected: index_is_selected,\n      onMouseEnter: onMouseEnter,\n      onMouseLeave: onMouseLeave,\n      onMouseClick: onMouseClick,\n      ...rest\n    } = props;\n    \n    const _index_is_selected = index_is_selected()==index;\n    \n    if (_index_is_selected){\n      console.log(this.node);\n      // this.node.current.focus();  \n      this.node.current.scrollIntoView({ behavior: \"auto\", block: \"center\", inline: \"center\" });\n    }\n    return (<span>\n      <RoughNotation {...rest} type='underline'\n        onMouseEnter={() => this.setState({ is_hovering: true })}\n        onMouseLeave={() => this.setState({ is_hovering: false })}\n        onClick={() => this._onMouseClick(index, onMouseClick)}\n        show={_index_is_selected || is_hovering} >\n      </RoughNotation> &nbsp;  <div ref={this.node}>\n      </div>  </span>\n    )   \n  }    \n}\n\n\nclass MyComponent extends StreamlitComponentBase<State> {\n  public state = { numClicks: 0, isFocused: false, is_hovering: -1 , is_selected: -1 }; \n  private get_is_selected = () => {\n    return this.state.is_selected;\n  }\n  private set_is_selected = (i: any) => {\n    if (i>=0){\n      this.setState({ is_selected: i });\n    }\n    \n  }\n  public render = (): ReactNode => {\n\n    const name = this.props.args[\"name\"]\n    this.set_is_selected(this.props.args[\"selected_index\"])\n\n    // Streamlit sends us a theme object via props that we can use to ensure\n    // that our component has visuals that match the active theme in a\n    // streamlit app.\n    const { theme } = this.props\n    const style: React.CSSProperties = {}\n    console.log(\"rerendered\");\n\n    // Maintain compatibility with older versions of Streamlit that don't send\n    // a theme object.\n    if (theme) {\n      // Use the theme object to style our button border. Alternatively, the\n      // theme style is defined in CSS vars.\n      const borderStyling = `1px solid ${\n        this.state.isFocused ? theme.primaryColor : \"gray\"\n      }`\n      style.border = borderStyling\n      style.outline = borderStyling\n    }\n    \n    \n    const values: any = name;\n    const props = {\n      animate: false,\n      strokeWidth: 2,\n      iterations:1,\n      multiline:true,\n      onMouseClick: this.onClicked,\n      \n\n    };\n    const func = (value: string, index: any) => \n    {\n      const rest = {\n        value: value,\n        index: index,\n        index_is_selected: () => this.get_is_selected() ,\n         ...props \n      };\n      return (\n        <MyRoughNotation {...rest} />\n    )}\n    return values.map(func);\n  }\n\n  private onClicked = (i: any) => {\n    this.setState(\n      prevState => ({ is_selected: i }),\n      () => Streamlit.setComponentValue(this.state.is_selected)\n    )\n  }\n}\n\nexport default withStreamlitConnection(MyComponent)\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport MyComponent from \"./MyComponent\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <MyComponent />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n)\n"],"sourceRoot":""}