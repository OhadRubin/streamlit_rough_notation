{"version":3,"sources":["../node_modules/typescript/lib sync","MyComponent.tsx","index.tsx"],"names":["webpackEmptyContext","req","e","Error","code","keys","resolve","module","exports","id","MyRoughNotation","props","React","useState","is_hovering_bool","setIsHovering","value","index","index_is_selected","onMouseClick","onMouseEnter","onMouseLeave","rest","_index_is_selected","type","onClick","_onMouseClick","show","HigherFunc","values","query_is_selected","_props","set_my_hook","has_set_hook","itemsRef","useRef","scrollToId","itemId","map","getMap","node","get","console","log","focus","scrollIntoView","behavior","block","inline","current","Map","res","key","ref","set","buildRef","useEffect","MyComponent","state","isFocused","is_selected","my_callback","i","get_is_selected","set_is_selected","setState","prevState","Streamlit","setComponentValue","setIDX","render","name","args","theme","style","borderStyling","primaryColor","border","outline","animate","strokeWidth","iterations","multiline","StreamlitComponentBase","withStreamlitConnection","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.827aac16.chunk.js","sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 21;","import {\n  Streamlit,\n  StreamlitComponentBase,\n  withStreamlitConnection,\n} from \"streamlit-component-lib\"\nimport React, { ReactNode } from \"react\"\nimport { RoughNotation } from \"react-rough-notation\";\nimport { Map } from \"typescript\";\nimport { useState, useEffect } from 'react';\n\ninterface State {\n  isFocused: boolean\n  is_selected: number\n  my_callback: any\n}\n\nfunction MyRoughNotation(props: any){\n  const [is_hovering_bool, setIsHovering] = React.useState(false);\n    function _onMouseClick(index: any, onMouseClick: any){\n      onMouseClick(index);\n    }\n  const {\n    value: value,\n    index: index,\n    index_is_selected: index_is_selected,\n    onMouseEnter: onMouseEnter,\n    onMouseLeave: onMouseLeave,\n    onMouseClick: onMouseClick,\n    ...rest\n  } = props;\n    \n    const _index_is_selected = index_is_selected()==index;\n    return (<span>\n      <RoughNotation {...rest} type='underline'\n        onMouseEnter={() => setIsHovering(true)}\n        onMouseLeave={() => setIsHovering(false)}\n        onClick={() => _onMouseClick(index, onMouseClick)}\n        show={_index_is_selected || is_hovering_bool} >\n        {value}\n\n      </RoughNotation> &nbsp; \n       </span >\n    )   \n  }    \n\n\nexport function HigherFunc(props:any) {\n  const { values: values, query_is_selected: query_is_selected, _props: _props, set_my_hook: set_my_hook } = props;\n  const [has_set_hook, setHook] = React.useState(0);\n  const itemsRef:any = React.useRef(null);\n  function scrollToId(itemId: any) {\n    const map = getMap();\n    const node:any = map.get(itemId);\n    console.log(map);\n    console.log(node);\n    if (node) {\n      node.focus();\n      node.scrollIntoView({\n        behavior: 'auto',\n        block: 'nearest',\n        inline: 'center'\n      });\n    }\n    \n  }\n  function getMap() {\n    if (!itemsRef.current) {\n      itemsRef.current = new Map();\n    }\n    return itemsRef.current;\n  }\n  function buildRef(node: any, index: any) {\n    const map = getMap();\n    if (node) {\n      map.set(index, node);\n    }\n  }\n\n  const _func = (value: string, index: any) => {\n    const rest = {\n      value: value,\n      index: index,\n      index_is_selected: () => query_is_selected(),\n      ..._props\n    };\n    return (\n      <span key={index}\n        ref={(node: any) => { buildRef(node, index); }}>\n\n        <MyRoughNotation {...rest}/>\n      </span>\n    )\n  };\n  const res = values.map(_func)\n  \n  useEffect(() => {\n    set_my_hook(scrollToId);}, [has_set_hook]\n\n  );\n\n  return (<span>{res}</span>)\n}\n\n\n\n\nclass MyComponent extends StreamlitComponentBase<State> {\n  public state = {\n    isFocused: false, is_selected: -1, my_callback: (i: any) => { }     \n    }; \n  \n\n\n  private get_is_selected = () => {\n    return this.state.is_selected;\n  }\n  private set_is_selected = (i: any) => {\n    if (i >= 0) {\n      // this.setState({ is_selected: i });\n      // console.log(\"set_is_selected with parameter i=\" + i)\n      this.setState(\n        prevState => ({ is_selected: i }),\n        () => {\n          if (this.state.is_selected!=i){\n\n            Streamlit.setComponentValue(i);\n          }\n        }\n        )\n        this.state.my_callback(this.state.is_selected);\n        // this.state.my_callback(this.state.is_selected);\n    }\n    \n  }\n  private set_my_hook = (setIDX: any) => {\n    this.setState({ my_callback: setIDX });\n  }\n\n  public render = (): ReactNode => {\n    const name = this.props.args[\"name\"]\n    this.set_is_selected(this.props.args[\"selected_index\"])\n    this.state.my_callback(this.state.is_selected);\n    // if (this.props.args[\"selected_index\"] != this.state.is_selected){\n    // }\n    \n\n    const { theme } = this.props\n    const style: React.CSSProperties = {}\n\n    if (theme) {\n      const borderStyling = `1px solid ${\n        this.state.isFocused ? theme.primaryColor : \"gray\"\n      }`\n      style.border = borderStyling\n      style.outline = borderStyling\n    }\n    \n    \n    const values: any = name;\n    const props = {\n      animate: false,\n      strokeWidth: 2,\n      iterations:1,\n      multiline:true,\n      onMouseClick: this.set_is_selected,\n      // onMouseClick: (i: any) => {},\n    };\n    \n    \n    return <HigherFunc values={values} query_is_selected={this.get_is_selected} _props={props} set_my_hook={this.set_my_hook}></HigherFunc>;\n\n  }\n\n}\n\nexport default withStreamlitConnection(MyComponent)\n","import React from \"react\"\nimport ReactDOM from \"react-dom\"\nimport MyComponent from \"./MyComponent\"\n\nReactDOM.render(\n  <React.StrictMode>\n    <MyComponent />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n)\n"],"sourceRoot":""}